{% extends "layout.html" %}
{% block title %}{{ User.Username }}'s Profile{% endblock %}

{% block head %}<link rel="stylesheet" href="{{ url_for('static', filename='css/users.css') }}">{% endblock %}

{% block content %}

<section id="profile-info">
    <hr class="img-border-line">
    <div class="page-container">
        <div class="container">
            <div class="row">
                <div class="col-lg-5">
                    <img class="profile-large" src="{{ url_for('static', filename='/img/profilePics/Default.png') }}">
                    {% if User.Verified == True %}
                        <img class="verification-ico" src="{{ url_for('static', filename='/img/Verified.png') }}">
                    {% endif %}
                    <h2><b> {{User.Username}} </b></h2>
                    <p class="light-text"><i> @{{User.UserId}}</i></p>
                    <p style="margin-bottom: 0px" class="light-text"><b><i>Status:</i></b></p>
                    <div class="clear-container">
                        <p>{{User.Status}}</p>
                    </div>

                    {% if session.id == User.UserId %}
                        <button id="EditButton" type="button" class="btn btn-secondary btn-sm" onclick="window.location.href = '/user/{{ User.UserId }}/edit'"><b>Edit Profile</b></button>
                    {% elif AbleToDonate != False %}
                        <button id="KudoButton" type="button" class="btn btn-success btn-sm" onclick="window.location.href = '/user/{{ User.UserId }}/give'"><b>Give Kudos</b></button>
                    {% endif %}

                    <hr>

                    <p><b>Joined: </b><i>{{ User.Misc["CreationDate"]|todate }}</i></p>

                    <h5><b>Total Kudos Amount:</b> <i>{{User.Kudos|length}}</i> Kudos</h5>

                    <div class="darken-screen">
                        <div class="popup-confirm">
                            <form class="form-inline">
                                <h2><b>Are you sure you want to send Kudos? üëè</b></h2>
                                <hr class="dashed">
                                <div class="popup-info">
                                    <h5><b>Receipt Info:</b></h5>
                                    <p>Recipient: {{User.Username}} <b>(@{{User.UserId}})</b></p>
                                    <div class="form-group">
                                        <label for="NumberToSend">Number of Kudos to Send: </label>
                                        {% if AbleToDonate == True %}
                                            <input type="number" class="form-control" id="NumberToSend", placeholder="1">
                                        {% else %}
                                            <select class="form-control" id="NumberToSend">
                                                {% for i in range(AbleToDonate) %}
                                                    <option>{{i + 1}}</option>
                                                {% endfor %}
                                            </select>
                                        {% endif %}
                                    </div>
                                    <label id="dateSent">Date Sent: </label>
                                    <script>
                                        n = new Date();
                                        y = n.getFullYear();
                                        m = n.getMonth() + 1;
                                        d = n.getDate();
                                        time = n.getHours()+":"+n.getMinutes();
                                        document.getElementById("dateSent").innerHTML = "Date Sent: "+m+"/"+d+"/"+y+" "+time
                                    </script>
                                </div>
                                <hr>
                                <button type="submit" class="btn btn-success">Send Kudo üëè</button>
                                <button type="cancel" class="btn btn-danger">Cancel üóô</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div id="kudo-info" class="kudo-info">
                        <p>Grade Level: {{User.Grade}}</p>
                        <p></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
    var elem = document.getElementById("KudoButton")
    if (elem != null){

        //window.location.href = '/user/{{ User.UserId }}/give'
    }
</script>

{% endblock %}